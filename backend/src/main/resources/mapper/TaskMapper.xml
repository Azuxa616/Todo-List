<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iflove.todolist.mapper.TaskMapper">

    <!-- 插入任务 -->
    <insert id="create" parameterType="com.iflove.todolist.domain.dto.TaskInsertDto" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO task (user_id, title, description, due_date, category_id)
        VALUES (#{uid}, #{title}, #{description}, #{dueDate},
                (SELECT id FROM category WHERE user_id = #{uid} AND name = #{categoryName}));
    </insert>
</mapper>
